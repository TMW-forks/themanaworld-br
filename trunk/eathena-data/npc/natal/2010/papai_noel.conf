//
// @autor Diogo_RBG - http://diogorbg.blogspot.com
// @desc O bom velhinho está te esperando em seu chalé nas montanhas.
// #quest <desc>, <getItens>, <delItens>, <extra>
// @quest 'Biscoitos de Natal', '1 presenteDourado', '? santaCookie', 'Level >= 30.'
// @quest 'Gorro de Papai Noel', '1 SantaBeardHat', '1 presenteDourado', ''

010-2.gat,90,21,0	script	debug	105, {
	mes "debug";
	menu
		"set 0", -,
		"set 3", -,
		"Sair", -;
	if (@menu==1) set NATAL2_noel, 0;
	if (@menu==2) set NATAL2_noel, 3;
	close;
}

010-2.gat,93,21,0	script	Papai Noel	105, {
	setarray @trocado$, "Menino", "Menina";
	setarray @umMenino$, "uma menina", "um menino";

	if (QUEST_biscoitoNatal==0 && countitem(635)>8 && BaseLevel>=30) goto _biscoitos;
	if (QUEST_gorroBarba==0 && countitem(3045)) goto _presenteDourado;

	if (NATAL2_noel==1 || NATAL2_noel==2) goto _semOculos;
	if (NATAL2_noel==3) goto _comOculos;
	if (NATAL2_noel==4) goto _ajudaComPresentes;
	if (NATAL2_noel==5) goto _verificaPresentes;
	if (NATAL2_noel==6) goto _felizNatal;

//- NATAL 2010 DO TMW-BR ----------------------------------------------

	mes "[Papai Noel]";
	mes "\"How How How. Feliz natal! " +@trocado$[sex]+ ".\"";
	next;
	menu
		"Mas Papai Noel...eu sou " +@umMenino$[sex]+ "...", -;
	mes "Papai Noel faz uma tentativa de lhe ver melhor, como se não estivesse lhe enxergando direito.";
	next;
	mes "[Papai Noel]";
	mes "\"Oh! Me perdoe criança, não vi que você era " +@umMenino$[sex]+ ". Estou com sérios problemas neste natal.\"";
	next;
	mes "["+ strcharinfo(0) +"]";
	mes "> \"Tudo bem papai Noel, mas o que aconteceu? Vejo que o senhor não está usando o seus óculos.\"";
	next;
	mes "[Papai Noel]";
	mes "\"É minha criança, estou com um problemão. Eu estava vendo as cartinhas das crianças quando o meu amigo boneco de neve veio me fazer uma visita.\"";
	next;
	mes "[Papai Noel]";
	mes "\"Tirei os óculos e deixei-o em cima da mesa. Daí algum dos meus ajudantes, enquanto eu conversava, fez uma carinha no bumbum do boneco de neve, usando os meus óculos e alguns doces. No momento eu não vi nada, mas assim que ele saiu, os danadinhos começaram a rir.\"";
	next;
	mes "[Papai Noel]";
	mes "\"Ai ai, estes meus ajudantes... Agora, como está próximo do natal, não tem como eu pedir para eles irem lá pegar os óculos novamente. Eles estão muito ocupados agora. E eu também não posso ir, pois tenho que organizar tudo. A única solução é alguém ir lá e falar com ele.\"";
	next;
	menu
		"Não se preocupe Noel, eu vou lá falar com ele.", _falarComEle,
		"Óculos no bumbum...kkk.", -;
	mes "[Papai Noel]";
	mes "\"Oh! Que indelicadeza de sua parte!\"";
	close;

_falarComEle:
	mes "[Papai Noel]";
	mes "\"Oh! Seria muito gentil de sua parte fazer isso por este velhinho. Obrigado "+strcharinfo(0)+".\"";
	set NATAL2_noel, 1;
	close;

_semOculos:
	mes "[Papai Noel]";
	mes "\"Olá "+strcharinfo(0)+", vejo que ainda não conseguiu os meus óculos. Por favor, vá até o meu amigo Boneco de Neve e peça a ele para me devolver. Caso contrário, não vou conseguir ler a lista de presentes das crianças e o natal vai ser um desastre este ano.\"";
	close;

_comOculos:
	mes "[Papai Noel]";
	mes "How How How! Você conseguiu pegar eles! Agora o natal está a salvo! Muito obrigado "+strcharinfo(0)+". Vou colocar o seu nome na listinha de presentes especiais, How How How! Tenha um feliz natal "+strcharinfo(0)+".";
	set NATAL2_noel, 4;
	close;

//- JUNTAR PRESENTES PARA O PAPAI NOEL --------------------------------

_ajudaComPresentes:
	mes "[Papai Noel]";
	mes "\"Olá de novo " +strcharinfo(0)+ "! Estava precisando muito da sua ajuda.\"";
	next;
	menu
		"Claro! O que eu posso fazer desta vez papai Noel?", _ajudaComPresentes2,
		"No momento eu estou ocupado Noel, lamento.", -;
	mes "[Papai Noel]";
	mes "\"Ah...tudo bem minha criança. Acho que eu posso resolver sozinho. Tenha um feliz natal.\"";
	close;


_ajudaComPresentes2:
	mes "[Papai Noel]";
	mes "\"Oh minha criança! Muito obrigado por me ajudar. O problema é que agora que tenho os óculos, eu li a lista de presentes e vi que temos muita coisa para fazer. Não sei se os meus ajudantes dão conta de tudo. Preciso que você me ajude a pegar alguns presentes.\"";
	next;
	menu
		"Sim! Ajudo.", -;
	mes "["+ strcharinfo(0) +"]";
	mes "> \"Mas em que lugar da casa os presentes estão?\"";
	next;
	mes "[Papai Noel]";
	mes "\"Não estão dentro da casa...Estão do lado de fora.\"";
	next;
	menu
		"O que?", -,
		"Do lado de fora?", -;
	mes "[Papai Noel]";
	mes "\"Tunico estava separando uma pilha de presentes lá fora, quando de repente alguns limos engoliram os presentes e saíram pólo norte afora. Agora, cabe a você recuperar X,Ye Z presentes para que o natal seja salvo mais uma vez.\"";
	next;
	menu
		"Já estou a caminho.", -;
	set NATAL2_noel, 5;
	close;

_verificaPresentes:
	goto _semTodosPresentes;
	close;

_semTodosPresentes:
	mes "[Papai Noel]";
	mes "\"Oh...volte aqui quando recuperar todos os X,Y e Z presentes que te pedi. Por favor, seja breve, pois o natal já está quase chegando...\"";
	close;

_comTodosPresentes:
	mes "[Papai Noel]";
	mes "\"How How How. Você conseguiu mais uma vez! Que bravura! Como prêmio lhe entrego esta lembrancinha para que você carregue consigo o espírito do natal em todos os dias do ano.\"";
	set NATAL2_noel, 6;
	next;
	goto _felizNatal;

_felizNatal:
	mes "[Papai Noel]";
	mes "\"Feliz natal minha criança! Que sua generosidade dure por toda a vida. Sei que você irá longe neste mundo!\"";
	close;

//- OS BISCOITOS PREFERIDOS DO PAPAI NOEL -----------------------------

_biscoitos:
	mes "[Papai Noel]";
	mes "\"Humm... que cheirinho bom!";
	mes "Você tem aqueles deliciosos biscoitos de Natal?\"";
	next;
	menu
		"Tenho alguns.", _tenho,
		"Eu estava juntando eles pra você.", _tenho,
		"Não tenho biscoitos.", -;
	mes "[Papai Noel]";
	mes "\"How How How!";
	mes "Então acho que meu nariz está me enganando.";
	mes "Ou talvez sejam alguns farelos dos que comi hoje de manhã!\"";
	close;

_tenho:
	mes "[Papai Noel]";
	mes "\"Eu sabia! Nunca me engano quanto a isso!";
	mes "...";
	mes "Papai Noel pode comer alguns biscoitos com você?\"";
	next;
	menu
		"Claro Papai Noel!", -,
		"Sabia que você ia querer!", -,
		"Eu sou " +@bomMenino$[sex]+ "!", -;
	mes "[Papai Noel]";
	mes "\"Papai Noel até vai te dar este presentinho!\"";
	next;
	if (countitem(635)<9) goto _semBiscoito;
	getinventorylist;
	if( (@inventorylist_count + (countitem(635)>15) + (countitem(3045)==0) ) > 100 ) goto _cheio;

	mes "[Papai Noel]";
	mes "CrOoOck CroOock CrOOOck!";
	mes "\"Que delícia!\"";
	mes "";
	mes "* Você ganhou um [Presente Dourado].";
	set @tmp, countitem(635);
	if (@tmp>15) set @tmp, 15; // Retira até 15 biscoitos.
	delitem 635, @tmp;
	getitem 3045, 1;
	set QUEST_biscoitoNatal, 1;
	close;

_semBiscoito:
	mes "[Papai Noel]";
	mes "\"Que pena, você não tem o suficiente para nós dois.\"";
	close;

_cheio:
	mes "[Papai Noel]";
	mes "\"Você está carregando muita coisa.\"";
	close;

//- ABRINDO UM PRESENTE JUNTO COM O PAPAI NOEL ------------------------

_presenteDourado:
	mes "[Papai Noel]";
	mes "\"Ainda não abriu o seu presente dourado?\"";
	next;
	menu
		"O que tem nele?", _explica,
		"Presente dourado?", _explica,
		"Depois eu abro.", -;
	mes "[Papai Noel]";
	mes "\"Tudo bem então.\"";
	close;

_explica:
	mes "[Papai Noel]";
	mes "\"O presente dourado possui uma magia especial de natal de ocultar o presente nele guardado. Fazendo que ele sempre seja uma surpresa.\"";
	next;
	mes "[Papai Noel]";
	mes "\"As vezes ele pode te surpreender com um presente muito especial! Lhe dando o que você mais deseja caso ele sinta uma forte presença do seu espírito de natal.";
	mes "";
	mes "Deseja abrí-lo agora?\"";
	next;
	menu
		"SIM!!!", -,
		"Vou abrir agora mesmo!", -,
		"Estou repleto do espírito do natal.", -;
	if (countitem(3045)==0) goto _semPresente;
	getinventorylist;
	if( (@inventorylist_count + (countitem(3045)>1) + 1) > 100 ) goto _cheio;

	mes "[Papai Noel]";
	mes "\"Parece que você gosta muito do Papai Noel!";
	mes "How How How!!!\"";
	mes "";
	mes "* Você ganhou um [Gorro de Papai Noel].";
	delitem 3045, 1;
	getitem 1206, 1;
	set QUEST_gorroBarba, 1;
	close;

_semPresente:
	mes "[Papai Noel]";
	mes "\"Não esconda seu presente.\"";
	close;
}
