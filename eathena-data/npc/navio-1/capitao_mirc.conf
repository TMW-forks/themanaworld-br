///////////////////////////////////////////////////////////////////
//  IDE: TMW-Maker v0.2
//  MODIFICADO: 21/10/2010 12:04 AM
///////////////////////////////////////////////////////////////////

navio-1.gat,24,23,0	script	Capitão Mirc	303,{
///////////////////////////////////////////////////////////////////
//  PROGRAMADOR: Lunovox
//  ACRIAÇÃO: 20/10/2010 10:32 PM
//  UTILIDADE DO SCRIPT:
//    * Capitão que controla a cidade de destino do navio.
///////////////////////////////////////////////////////////////////
_inicio:
     setarray @Cidade$, 
       "Porto da Vila dos Pescadores",
       "Porto do Polo Norte",
       "Porto de Hades",
       "Porto de Halicarnaso em Manaland";
     setarray @Distancia, 1,3,5,7;
     setarray @Custo, 1000,3000,5000,7000;

     mes "[Capitão Mirc]";
     if(Sex==1) mes "\"Olá meu jovem!\"";
     if(Sex==0) mes "\"Olá minha jovem!\"";
     next;
     if(SeTrabalhaNoNavio==1) goto _TrazCaldas;
     if(PortoAtracado==-1) goto _Altomar;
_PerguntaBase:
     mes "[Capitão Mirc]";
     mes "\"Deseja viajar para alguma cidade?\"";
     next;
     mes "["+ strcharinfo(0) +"]";
     menu 
       "Sim!", _EscolherDestino,
       "Quanto Custa?", _Custo,
       "Não! Obrigado!", -;
_Desistencia:
     mes "[Capitão Mirc]";
     mes "\"Ok! Fique a vontade para voltar quando desejar\"";
close; 

_Custo:
     mes "[Capitão Mirc]";
     mes "\"O custo das passagens são\:";
     mes @Cidade$[0] +"\: 1.000 GP";
     mes @Cidade$[1] +"\: 3.000 GP";
     mes @Cidade$[2] +"\: (impedido)";
     mes @Cidade$[3] +"\: (impedido)\"";
     next;
goto _PerguntaBase;

_EscolherDestino:
     mes "["+ strcharinfo(0) +"]";
     mes "\"Meu destino será:\"";
     menu 
       "Nenhum! Eu ficarei aqui mesmo!", -,
       " * "+ @Cidade$[0], -,
       " * "+ @Cidade$[1], -,
       " * "+ @Cidade$[2], -,
       " * "+ @Cidade$[3], -;
       if(@menu==0) goto _Desistencia;
       if(@menu>=1 && @menu<=2) set PortoDesejado,@menu-2;
       if(@menu>=3 && @menu<=4) goto _PortoImpedido;
goto _PortoDesatracar;


_SemGrana:
     mes "[Capitão Mirc]";
     mes "\"Você não tem dinheiro suficiente! Mas se você aceitar pode viajar comigo se aceitar trabalhar para mim como ajudante.\"";
     next;
     mes "["+ strcharinfo(0) +"]";
     menu 
       "O que eu preciso fazer?", -,
       "Não quero, obrigado!", _Desistencia;
goto _InteressePeloTrabalho;

_SemCaldas:
     mes "[Capitão Mirc]";
     mes "\"Você ainda não matou todos os ratos que eu mandei? Vá logo!";
     mes "E só volte quando tiver as 30 caldas de ratos como prova!\"";
close;

_InteressePeloTrabalho:
     mes "[Capitão Mirc]";
     mes "\"Só precisa que fique matando os ratos que ficam comendo toda a comida do conveś.\"";
     next;
     mes "["+ strcharinfo(0) +"]";
     mes "\"Parece interessante!\"";
     next;
     mes "[Capitão Mirc]";
     mes "\"Sim! Para provar que vc está trabalhando direitinho eu quero que vc consiga pelo menos 30 caldas destes de ratos para mim.\"";
     next;
     mes "["+ strcharinfo(0) +"]";
     menu 
       "Ok! Eu aceito!", _AceitaTrabalho,
       "Não! Obrigado!", _Desistencia;
_Desistencia;

_AceitaTrabalho:
     set SeTrabalhaNoNavio,1;
     set PortoAtracado,-1;
     mes "[Capitão Mirc]";
     mes "\"Ok Marujo! Mãos a obra! Vamos viajar com este navio com toda a força dos ventos. "+
         "Não quero ver sua cara enquanto não conseguir o que lhe mandei.\"";
close;

_TrazCaldas:
     mes "[Capitão Mirc]";
     mes "\"Trouxe as 30 caldas de rato que eu mandei?\"";
     next;
     mes "["+ strcharinfo(0) +"]";
     menu
       "Sim! Estão aqui!",_PortoDesatracar,
       "Não! Falta pouco!",_SemCaldas;
goto _PortoDesatracar;

_PortoImpedido:
     mes "[Capitão Mirc]";
     mes "\"Esse porto foi trancado e está impedido a entrada de navio. Desculpe!\"";
     next;
goto _EscolherDestino;

_PortoAtracado:
     mes "[Capitão Mirc]";
     mes "\"Já estamos atracados em "+ @Cidade$[PortoAtracado] +".\"";
goto _EscolherDestino;

_PortoDesatracar:
     if(PortoAtracado==PortoDesejado) goto _PortoAtracado;
     if(SeTrabalhaNoNavio!=1 && Zeny<@Custo[PortoDesejado]) goto _SemGrana;
     if(SeTrabalhaNoNavio==1 && countitem(3169)<30) goto _SemCaldas;
     if(SeTrabalhaNoNavio!=1) set Zeny, Zeny-@Custo[PortoDesejado];
     if(SeTrabalhaNoNavio==1) delitem 3169,30;
     set SeTrabalhaNoNavio,0;
     set PortoAtracado,-1;
     callfunc "getTime";
     set EsperaAoPorto, @time + (@Distancia[PortoDesejado]*60);
     if(SeTrabalhaNoNavio==1) mes "[Capitão Mirc]";
     if(SeTrabalhaNoNavio==1) mes "\"Bom tabalho!!!\"";
     if(SeTrabalhaNoNavio==1) next;
     mes "[Capitão Mirc]";
     mes "\"Acabamos de sair com o navio. Va curtir a viagem, pois logo-logo chegaremos ao "+ @Cidade$[PortoDesejado] +".\"";
close;

_Altomar:
	callfunc "getTime";
   if(EsperaAoPorto>@time) goto _NaoAtracado;
   set PortoAtracado,PortoDesejado;
   mes "[Capitão Mirc]";
   mes "\"Acabamos de atracar ao "+ @Cidade$[PortoDesejado] +". Espero que tenha gostado a viagem!\"";
close;

_NaoAtracado:
     mes "[Capitão Mirc]";
     mes "\"Ainda não chegamos ao "+ @Cidade$[PortoDesejado] +". Espere um pouco mais!\"";
close;

}
