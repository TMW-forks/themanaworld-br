//
// Quest de Evento de Natal
// @author: Diogo_RBG

010.gat,150,80,0	script	Duende Faísca	319, {
	set @id, 0;
	callfunc "menuFaisca";
	close;
}

//=====================================================================

function	script	menuFaisca	{
	mes "[Duende Faísca]";
	mes "\"Feliz Natal!";
	mes "Por falar em natal... como anda o resgate dos presentes perdidos?\"";
	setarray @texto$, "Quero voltar para a Ilha Fortaleza.", "Me leve ao Polo Norte.";
	goto _menu;

_menu:
	menu
		"Veja meus presentes rosa.", _rosa,
		"Veja meus presentes azul.", _azul,
		"Veja meus presentes verde.", _verde,
		@texto$[@id], _transp,
		"Porque te chamam de faísca?", _nome,
		"Tenho que ir.", -;
	return;

_rosa:
	mes "[Duende Faísca]";
	mes "\"Isso é bom!";
	mes "Mas fale com a Lulu... pois ela quem é encarregada dos presentes rosa.\"";
	mes "";
	mes "* Ainda em construção. Basta juntar o máximo de [Presente Rosa] para trocar com a Duende Lulu.";
	mes "* Previsão: antes de acabar o Evento de Natal.";
	next;
	goto _menu;

_verde:
	mes "[Duende Faísca]";
	mes "\"Ótimo!";
	mes "Mas fale com o Tunico... pois ele quem é encarregado dos presentes verde.\"";
	mes "";
	mes "* Ainda em construção. Basta juntar o máximo de [Presente Verde] para trocar com o Duende Tunico.";
	mes "* Previsão: antes de acabar o Evento de Natal.";
	next;
	goto _menu;

_azul:
	mes "[Duende Faísca]";
	mes "";
	mes "* Ainda em construção. Basta juntar o máximo de [Presente Azul] para trocar com o Duende Faísca.";
	mes "* Previsão: antes de acabar o Evento de Natal.";
	next;
	goto _menu;

_transp:
	if (@id==0) goto _para008;
	callfunc "para010";
	return;

_para008:
	warp "008.gat", 0, 0;
	mes "[Duende Faísca]";
	mes "\"Eu fico confuso quando você me pede para ir para este lugar.\"";
	return;

_nome:
	mes "[Duende Faísca]";
	mes "\"Quem me deu este apelido foi a peste do Tunico... ele dizia que todas as minhas magias soltavam faísca.";
	mes "É exagero dele, porque nem todas fazem isso.\"";
	next;
	goto _menu;
}

//=====================================================================

function	script	para010	{
	setarray @pnts,
		156,82,
		135,42,
		160,45,
		129,59,
		98,72,
		130,93,
		175,99,
		159,112;
	set @tmp, rand(8);
	set @x, rand(5);
	set @y, rand(5);
	warp "010.gat", @pnts[@tmp*2]+(@x-2), @pnts[(@tmp*2)+1]+(@y-2);

	mes "[Duende Faísca]";
	if (@tmp==0) mes "\"Viu como a viagem foi tranquila!\"";
	if (@tmp!=0 && @tmp<=4) mes "\"Eu acho que fiz alguma coisa errada.\"";
	if (@tmp>4) mes "\"Foi quase... na próxima eu acerto!\"";
	return;
}
