/**
 * Funções para o evento de Páscoa 2011
 */

/**
 * Um esconderijo genérico para ovos de páscoa.
 * @var arg0 Nome do mapa.
 * @var arg1 coordenada x do NPC.
 * @var arg2 coordenada y do NPC.
 * @var arg3 Nome do NPC. ponte, planta, flor...
 * @var @num Identificador numérico do esconderijo.
 * @date quinta, 03 de março de 2011
 * @author Diogo_RBG - http://diogorbg.blogspot.com
 */
function	script	escondeOvos	{
	set @x, getarg(1);
	set @y, getarg(2);
	if( isin(getarg(0), @x-3, @y-3, @x+3, @y+3)==0 ) goto _longe;

	set @mod, @num%12;
	if(PASCOA2_escondeNum==@mod) goto _certo;
	mes "[Esconderijo]";
	if(getarg(3)=="pedra") mes "Nenhum ovo de páscoa escondido atrás desta pedra.";
	if(getarg(3)=="planta") mes "Nenhum ovo de páscoa escondido nas folhas desta planta.";
	if(getarg(3)=="árvore      ") mes "Nenhum ovo de páscoa escondido no tronco oco desta árvore.";
	if(getarg(3)=="flor") mes "Nenhum ovo de páscoa escondido no meio destas flores.";
	if(getarg(3)=="ponte") mes "Nenhum ovo de páscoa escondido debaixo desta ponte.";
	if(getarg(3)=="caverna") mes "Nenhum ovo de páscoa escondido na entrada desta caverna.";
	//mes "Nenhum ovo de páscoa escondido neste esconderijo.";
	return;

_certo:
	mes "[Esconderijo]";
	mes "Agora sim!";
	mes "";
	if(getarg(3)=="pedra") mes "* Você encontrou um ovo de páscoa escondido atrás desta pedra.";
	if(getarg(3)=="planta") mes "* Você encontrou um ovo de páscoa escondido nas folhas desta planta.";
	if(getarg(3)=="árvore      ") mes "* Você encontrou um ovo de páscoa escondido no tronco oco desta árvore.";
	if(getarg(3)=="flor") mes "* Você encontrou um ovo de páscoa escondido no meio destas flores.";
	if(getarg(3)=="ponte") mes "* Você encontrou um ovo de páscoa escondido debaixo desta ponte.";
	if(getarg(3)=="caverna") mes "* Você encontrou um ovo de páscoa escondido na entrada desta caverna.";
	//mes "* Você encontrou um ovo de páscoa escondido aqui!";
	getitem 1208+rand(6), 1;
	set PASCOA2_escondeNum, rand(12); //- 20% de chance... 60 * 0,2 = 12
	set PASCOA2_escondeCont, PASCOA2_esconderijoCont+1;
	return;

_longe:
	mes "[Esconderijo]";
	mes "Muito longe... melhor chegar mais perto.";
	return;
}
