//
// Script de Natal
// @autor Diogo_RBG - http://diogorbg.blogspot.com

function	script	eventoNatal	{
	mes "[Guia de Natal]";
	mes "\"O que você gostaria de saber sobre o Evento de Natal?\"";
	set @h, gettime(3)-3;    // Fuso horário
	if (@h<0) set @h, @h+24; // Correção
	mes "";
	mes "* Hora certa: "+@h+":"+gettime(2)+":"+gettime(1)+".";
	if (NATAL_evento>=1) goto _vcParticipando;
	goto _menu;

_vcParticipando:
	set @tmp, gettime(5);
	if (@tmp<24 || @tmp>28) goto _fimEvento;

	mes "* Você está participando do 'Evento de Natal'.";
	if (@h==8 || @h==14 || @h==20) goto _ocorrendo;
	set @tmp2, 8;
	if (@h>8) set @tmp2, 14;
	if (@h>14) set @tmp2, 20;
	if (@h>20) goto _menu;
	set @tmp, @tmp2-@h-1;
	set @tmp2, 60-gettime(2);
	mes "* Faltam "+@tmp+" horas e "+@tmp2+" minutos.";
	goto _menu;

_ocorrendo:
	mes "* O 'Evento de Natal' está ATIVADO!";
	goto _menu;

_fimEvento:
	mes "";
	set @tmp, gettime(5);
	if (@tmp==23) mes "* O 'Evento de Natal' ainda não iniciou.";
	if (@tmp!=23) mes "* O 'Evento de Natal' foi encerrado.";
	goto _menu;

_menu:
	if (NATAL_evento>=1) goto _menu2;
	goto _menu1;

_menu1:
	menu
		"Informações sobre o Evento de Natal.", _info,
		"Como participar do Evento de Natal?", _comoParticipar,
		"Sobre o [Presente Dourado].", _info2,
		"Sobre o [Presente Prateado].", _info3,
		"Sair.", -;
	return;

_menu2:
	menu
		"Informações sobre o Evento de Natal.", _info,
		"Quantos [Presente Prateado] tenho?", _contarPresentes,
		"Mostrar Placar dos 15+", _placar,
		"Sobre o [Presente Dourado].", _info2,
		"Sobre o [Presente Prateado].", _info3,
		"Sair.", -;
	return;

_comoParticipar:
	mes "[Guia de Natal]";
	mes "\"O Natal deste ano corre sérios risco de não ser o mais alegre dos natais!";
	mes "Papai Noel perdeu os presentes do natal assim que subiu ao céu do Polo Norte com seu trenó e agora precisa de toda ajuda que puder contar para recuperar os presentes.";
	mes "Ele irá enviar um de seus duendes ajudantes para cá. Assim que ele chegar, poderá nos tele-transportar para o Polo Norte.\"";
	next;
	mes "[Guia de Natal]";
	mes "* Primeiro fale com o 'Duende Faísca' para participar do Evento de Natal. (Só disponível a partir do dia 24/12)";
	next;
	goto _menu;

_info:
	mes "[Guia de Natal]";
	mes "\"Muita atenção, pois o The Mana World BR está em Evento de Natal!\"";
	next;
	mes "[Guia de Natal]";
	mes "* Nos dias 24, 25, 26, 27 e 28 nos horários 08:00 às 08:59, 14:00 às 14:59 e 20:00 às 20:59 estará ocorrendo o grande Evento de Natal. (Hora certa: "+@h+":"+gettime(2)+":"+gettime(1)+")";
	mes "* Haverá distribuição de prêmios aos primeiros 10 colocados. Que são aqueles que possuem o maior número de [Presente Prateado].";
	next;
	mes "[Guia de Natal]";
	mes "* Será sua grande chance de evoluir com novas missões especiais e também de ganhar prêmios especiais.";
	mes "* Fórum: http://www.themanaworld.com.br. Na sessão de eventos será divulgada a lista de prêmios.";
	mes "* Dica: Não venda seus [Presente Prateado].";
	next;
	goto _menu;

_info2:
	mes "[Guia de Natal]";
	mes "\"Você já encontrou alguma caixa de presente com embrulho dourado?";
	mes "Se você encontrar basta abrí-la para ganhar uma das 12 surpresas de natal!\"";
	next;
	mes "[Guia de Natal]";
	mes "* A caixa [Presente Dourado] fornece um item surpresa a quem abrí-la.";
	mes "* Esta caixa só cai dos monstros 'Limo de Neve' e 'Limo de Gelo' nos horários do evento.";
	mes "* A chance deste item cair é de 4% e só cairá 1 por evento. (no máximo 3 por dia)";
	next;
	mes "[Guia de Natal]";
	mes ".:: Lista das 12 surpresas ::.";
	mes "1- Gorro de Natal";
	mes "2- Chapéu Chifres de Rena";
	mes "3- Chapéu Árvore de Natal";
	mes "4- Boné Amarelo Bordado";
	mes "5- Boné Verde Bordado";
	mes "6- Boné Vermelho Bordado";
	mes "7- Boné Azul Bordado";
	mes "8- Gorro de couro de Cobra";
	mes "9- Gorro de couro de Cobra da Grama";
	mes "10- Gorro Cérebro";
	mes "11- Gorro dos Duendes do Natal";
	mes "12- Gorro de Papai Noel (*)";
	mes "";
	mes "* O [Gorro de Papai Noel] não se pode pegar apenas abrindo o presente.";
	next;
	goto _menu;

_info3:
	mes "[Guia de Natal]";
	mes "\"Colete o máximo de caixas de presente com embrulho prateado você puder!\"";
	next;
	mes "[Guia de Natal]";
	mes "* A caixa [Presente Prateado] é o item objetivo do Evento de Natal.";
	mes "* Esta caixa só cai dos monstros 'Limo de Neve' e 'Limo de Gelo' nos horários do evento.";
	mes "* A chance deste item cair é de 4%. (não há limites de drop)";
	mes "* Ao final do evento as caixas prateadas terão um alto valor no mercado... vale a pela juntá-las.";
	mes "* Este item não poderá ser transferido para outro jogador... os que fizerem isso serão punidos pelo próprio jogo.";
	next;
	goto _menu;

_contarPresentes:
	set @tmp, NATAL_evento-1;
	if (countitem(3044)<@tmp) set @tmp, countitem(3044);
	npctalk "'"+strcharinfo(0)+"' recuperou " +@tmp+ " [Presente Prateado].";
	mes "[Guia de Natal]";
	mes "\"Foram recuperados "+@tmp+" [Presente Prateado].\"";
	return;

_placar:
	mes "[Guia de Natal]";
	mes ".:: Placar dos 15+ ::.";

	set @i, -1;
	_loop: set @i,@i+1; if(@i>=$NATAL_numPlacar) goto _fimLoop;
		//mes (@i+1)+ "º - " +$NATAL_vetPlacar[@i]+ " - " + $NATAL_nomPlacar$[@i] +" (?)";
		// if ($NATAL_lvlPlacar[@i]!=0)
		mes (@i+1)+ "º - " +$NATAL_vetPlacar[@i]+ " - " + $NATAL_nomPlacar$[@i] +" (" +$NATAL_lvlPlacar[@i]+ ")";
		goto _loop;
	_fimLoop:

	next;
	goto _menu;

}
