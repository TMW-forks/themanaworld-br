//
// Script de Halloween
// @autor Diogo_RBG - http://diogorbg.blogspot.com

function	script	eventoHalloween	{
	mes "[Guia de Halloween]";
	mes "\"O que você gostaria de saber sobre o Evento de Halloween?\"";
	if (HALLOWEEN_evento>=2) goto _vcParticipando;
	goto _menu;

_vcParticipando:
	set @tmp, gettime(5);
	if (@tmp>2 && @tmp<29) goto _fimEvento;

	mes "";
	mes "* Você está participando do 'Evento de Halloween'.";
	set @tmp, gettime(3)-3; // Fuso horário
	mes "* Hora certa: "+@tmp+":"+gettime(2)+":"+gettime(1)+".";
	if (@tmp==8 || @tmp==14 || @tmp==20) goto _ocorrendo;
	set @tmp2, 8;
	if (@tmp>8) set @tmp2, 14;
	if (@tmp>14) set @tmp2, 20;
	if (@tmp>20) goto _menu;
	set @tmp, @tmp2-@tmp-1;
	set @tmp2, 60-gettime(2);
	mes "* Faltam "+@tmp+" horas e "+@tmp2+" minutos.";
	goto _menu;

_ocorrendo:
	mes "* O 'Evento de Halloween' está ATIVADO!";
	goto _menu;

_fimEvento:
	mes "";
	set @tmp, gettime(5);
	if (@tmp==28) mes "* O 'Evento de Halloween' ainda não iniciou.";
	if (@tmp!=28) mes "* O 'Evento de Halloween' foi encerrado.";
	goto _menu;

_menu:
	if (HALLOWEEN_evento>=2) goto _menu2;
	goto _menu1;

_menu1:
	menu
		"Como participar do Evento de Halloween?", _comoParticipar,
		"Informações sobre o Evento de Halloween.", _info,
		"Informações sobre itens e monstros.", _infoItens,
		"Sair.", -;
	return;

_menu2:
	menu
		"Quantas [Sementes de Abóbora] tenho?", _contarSementes,
		"Informações sobre o Evento de Halloween.", _info,
		"Informações sobre itens e monstros.", _infoItens,
		"Sair.", -;
	return;

_comoParticipar:
	mes "[Guia de Halloween]";
	mes "\"Você ainda não soube das notícias? Jack pode lhe dizer.";
	mes "Mas ele não está em casa. Está debaixo de uma árvore logo alí.\"";
	next;
	mes "[Guia de Halloween]";
	mes "* Primeiro fale com 'Jack o lenhador' para participar do Evento de Halloween.";
	next;
	goto _menu;

_info:
	mes "[Guia de Halloween]";
	mes "\"Muita atenção, pois o The Mana World BR está em Evento de Halloween!\"";
	next;
	mes "[Guia de Halloween]";
	mes "* Nos dias 29, 30, 31, 1 e 2 estará ocorrendo o grande Evento de Halloween. Durante este período haverá chuva e os monstros 'Cabeça de Abóbora' por todo lado.";
	mes "* Como funciona? Após inscrito mate os monstros 'Cabeça de Abóbora' nos horário do Evento de Halloween: 08:00 às 08:59, 14:00 às 14:59 e 20:00 às 20:59.";
	mes "* Quais serão os prêmios? Haverá distribuição de prêmios aos primeiros colocados. Que são aqueles que possuem o maior número de [Sementes de Abóbora]. No fórum será informado uma lista de prêmios.";
	next;
	mes "[Guia de Halloween]";
	mes "* Será sua grande chance de evoluir com novas missões especiais e também de ganhar prêmios especiais.";
	mes "* Fórum: http://www.themanaworld.com.br. Procure na sessão de Eventos.";
	mes "* Dica: Não venda suas [Sementes de Abóbora].";
	next;
	goto _menu;

_infoItens:
	mes "[Guia de Halloween]";
	mes "\"Cuidado para não perder suas sementes!\"";
	next;
	mes "[Guia de Halloween]";
	mes "* O item [Sementes de Abóbora] não pode ser transferido para outro jogador.";
	mes "* O item [Sementes de Abóbora] só pode ser adquirido nos horário do Evento de Halloween: 08:00 às 08:59, 14:00 às 14:59 e 20:00 às 20:59.";
	mes "* O monstro 'Cabeça de Abóbora' tem 4% de chance de fornecer [Sementes de Abóbora].";
	mes "* O monstro 'Cabeção de Abóbora' tem 10% de chance de fornecer [Sementes de Abóbora].";
	mes "* Os monstros assistentes do monstro 'Cabeção de Abóbora' não fornecem sementes.";
	next;
	goto _menu;

_contarSementes:
	set @tmp, HALLOWEEN_evento-2;
	if (countitem(3033)<@tmp) set @tmp, countitem(3033);
	npctalk "'"+strcharinfo(0)+"' tem " +@tmp+ " [Sementes de Abóbora].";
	mes "[Guia de Halloween]";
	mes "\"Foram conseguidas "+@tmp+" [Sementes de Abóbora] dos monstros.\"";
	return;

}
