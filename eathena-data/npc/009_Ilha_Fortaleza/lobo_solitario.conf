//

009.gat,87,64,0	script	#pertoLobo	0,1,1,{
	set DIST_loboSolitario, 1;
	close;
}

009.gat,90,64,0	script	#longeLobo	0,1,1,{
	set DIST_loboSolitario, 0;
	close;
}

009.gat,80,63,0	script	Lobo Solitário	314,{
	set @LEATHER_PATCH, 708;
	set @SNAKE_SKIN, 641;

	set @LEATHER_PATCH_PRICE, 300;

	set @wants_leather_patch, QUEST_Forestbow_state & NIBBLE_4_MASK;

	if (!DIST_loboSolitario) goto _muitoLonge;

	mes "[Lobo Solitário]";
	mes "\"How!\"";
	next;

	if (getequipid(equip_head) == 643 || getequipid(equip_head) == 644) goto L_WearingCowboy;
	if (getequipid(equip_legs) == 642) goto L_WearingChaps;

	mes "[Lobo Solitário]";
	mes "\"Por gerações, minha tribo têm criado roupas especiais de diferentes itens.\"";
	goto L_Check_Shops;

_muitoLonge:
	mes "[Lobo Solitário]";
	mes "\"Não posso te ouvir direito dessa distância.\"";
	close;

L_Check_Shops:
	if ((countitem(610) > 0 && countitem(@SNAKE_SKIN) > 9) && (countitem(524) > 0 && countitem(@SNAKE_SKIN) > 1)) goto L_Super_store;
	if (countitem(610) > 0 && countitem(@SNAKE_SKIN) > 9) goto L_Chaps_store;
	if (countitem(524) > 0 && countitem(@SNAKE_SKIN) > 1) goto L_Cowboy_store;

	mes "[Lobo Solitário]";
	mes "\"Talvez se você me trouxer o material certo, eu possa fazer algo para você.\"";
	next;

	if (!@wants_leather_patch)
		menu
			"Você é um índio?! Me conte mais sobre você.", _historia_indio,
			"OK, tchau.", -;
	if (@wants_leather_patch)
		menu
			"Você é um índio?! Me conte mais sobre você.", _historia_indio,
			"Espere, você pode fazer um retalho de couro para mim?", L_leather_patch,
			"OK, tchau.", -;
	close;

_historia_indio:
	mes "[Lobo Solitário]";
	mes "\"Sim, eu sou índio.";
	mes "Meu pai é o grande Chefe Monte Brilhante e minha mãe a bela Lua do Grande Lago.";
	mes "A muito tempo vivo distante de minha tribo e criar itens utilizando técnicas aperfeiçoadas por várias gerações de minha tribo é uma forma de me sentir mais próximo dela.\"";
	close;

L_CheckStuff:
	mes "[Lobo Solitário]";
	mes "\"Deixe-me ver o que você tem aí.\"";
	next;
	return;

L_Super_store:
	callsub L_CheckStuff;
	mes "[Lobo Solitário]";
	mes "\"Ahh você tem muitos artigos bons para se trabalhar.\"";
	mes "";
	mes "\"Com eles posso fazer se você quiser um chapéu de vaqueiro ou uma calça de couro de cobra.\"";
	next;
	if (@wants_leather_patch)
		menu
			"Chapéu de vaqueiro, por favor.", L_BuyCowboy,
			"Calça de couro de cobra soa bem.", L_BuyChaps,
			"Você pode fazer um retalho de couro?", L_leather_patch,
			"Não agora, talvez depois.", -;
	if (!@wants_leather_patch)
		menu
			"Chapéu de vaqueiro, por favor.", L_BuyCowboy,
			"Calça de couro de cobra soa bem.", L_BuyChaps,
			"Não agora, talvez depois.", -;
	goto L_NoDeal;

L_Cowboy_store:
	callsub L_CheckStuff;
	mes "[Lobo Solitário]";
	mes "\"Para lhe fazer um chapéu de vaqueiro vou precisar de:";
	mes "1 [Chapéu Fantasia]";
	mes "2 [Couro de Cobra da Montanha]";
	mes "5.000 GP\"";
	mes "";
	mes "\"Nós temos um acordo?\"";
	next;
	if (@wants_leather_patch)
		menu
			"Sim, tudo bem.", L_BuyCowboy,
			"Você pode fazer um retalho de couro?", L_leather_patch,
			"Pensando bem, talvez mais tarde.", -;
	if (!@wants_leather_patch)
		menu
			"Sim, tudo bem.", L_BuyCowboy,
			"Pensando bem, talvez mais tarde.", -;
	goto L_NoDeal;

L_Chaps_store:
	callsub L_CheckStuff;
	mes "[Lobo Solitário]";
	mes "\"Para lhe fazer uma calça de couro de cobra vou precisar de:";
	mes "1 [Short Jeans]";
	mes "10 [Couro de Cobra da Montanha]";
	mes "10.000 GP\"";
	mes "";
	mes "\"Nós temos um acordo?\"";
	next;
	if (!@wants_leather_patch)
		menu
			"Sim, tudo bem.", L_BuyChaps,
			"Pensando bem, talvez mais tarde.", -;
	if (@wants_leather_patch)
		menu
			"Sim, tudo bem.", L_BuyChaps,
			"Você pode fazer um retalho de couro?", L_leather_patch,
			"Pensando bem, talvez mais tarde.", -;
	goto L_NoDeal;

L_BuyChaps:
	if (zeny < 10000) goto L_NoMoney;
	if (countitem(610) < 1) goto L_NoJeans;
	if (countitem(@SNAKE_SKIN) < 10) goto L_NoSkin;
	set zeny, zeny - 10000;
	delitem @SNAKE_SKIN, 10;
	delitem 610, 1;
	getitem 642, 1;
	goto L_DealDone;

L_BuyCowboy:
	if (zeny < 5000) goto L_NoMoney;
	if (countitem(524) < 1) goto L_NoFancy;
	if (countitem(@SNAKE_SKIN) < 2) goto L_NoSkin;
	set zeny, zeny - 5000;
	delitem @SNAKE_SKIN, 2;
	delitem 524, 1;
	set @temp,rand(2);
	if(@temp == 0) goto L_Cowboy_white;
	goto L_Cowboy_black;

L_Cowboy_white:
	getitem 643, 1;
	goto L_DealDone;

L_Cowboy_black:
	getitem 644, 1;
	goto L_DealDone;

L_leather_patch:
	mes "[Lobo Solitário]";
	mes "\"Se você quiser apenas uma retalho de couro, então sim, posso fazer isso. Traga-me um [Couro de Cobra da Montanha] e " + @LEATHER_PATCH_PRICE + " GP.\"";
	next;
	menu
		"Aqui está!", -,
		"OK, Eu volto mais tarde.", L_end,
		"Isso é muito caro!.", L_NoDeal;

	if (countitem(@SNAKE_SKIN) < 1) goto L_NoSkins;
	if (zeny < @LEATHER_PATCH_PRICE) goto L_NoMoney;

	set zeny, zeny - @LEATHER_PATCH_PRICE;
	delitem @SNAKE_SKIN, 1;
	getitem @LEATHER_PATCH, 1;
	goto L_DealDone;

L_DealDone:
	mes "[Lobo Solitário]";
	mes "\"Aqui está!\"";
	mes "";
	mes "\"Volte quando quiser.\"";
	close;

L_NoDeal:
	mes "[Lobo Solitário]";
	mes "\"Certo, mas você não vai conseguir melhor negócio em qualquer outro lugar!\"";
	close;

L_NoMoney:
	mes "[Lobo Solitário]";
	mes "\"Oh, parece que você não tem dinheiro suficiente.\"";
	close;

L_NoJeans:
	mes "[Lobo Solitário]";
	mes "\"Oh, parece que você não tem bastante Short Jeans.\"";
	close;

L_NoFancy:
	mes "[Lobo Solitário]";
	mes "\"Oh, parece que você não tem bastante Chapéu Fantasia.\"";
	close;

L_NoSkins:
	mes "[Lobo Solitário]";
	mes "\"Oh, parece que você não tem bastante Couro de Cobra da Montanha.\"";
	close;

L_WearingCowboy:
	mes "[Lobo Solitário]";
	mes "\"Ah, vejo que você está usando um chapéu feito com os métodos antigos da minha tribo.\"";
	next;
	goto L_Check_Shops;

L_WearingChaps:
	mes "[Lobo Solitário]";
	mes "\"Ah, vejo que você está vestindo calças feitas por minha tribo.\"";
	next;
	goto L_Check_Shops;

L_end:
	close;
}
